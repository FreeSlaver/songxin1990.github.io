---
layout: page
title:  服务注册与发现
category: micro-service
tags:
keywords:
description:
published:  true
---

简单来说，就是将一个单体应用拆分为多个微服务之后，微服务之间如何相互调用，协调完成一个完整的业务流程。  
举个例子：以一个物流系统，用户寄件为例，首先用户的注册，完成实名验证，之后填写寄件人，收件人信息，然后填写寄件物品信息，之后计算出运费，用户支付订单，
然后系统通知快递员上门取件，取件完成后统一放到附近的揽件中心，然后通知车辆进行运送，之后你能够后台查询到寄件的物流轨迹，收件人是否取件等。  

在这个粗略的业务流程中，至少调用了：用户微服务，运费计算微服务，支付微服务，快递员微服务，车辆调度微服务，物流信息微服务等等。  

在之前的单体应用中，我们都是自己通过@Autowire注入对应的Service，然后调用Service接口中的方法来实现具体的功能，现在将这些Service都拆分到了
具体的微服务实例中，我们如何通信，查找到并且调用了？  

所以第一个，我们要将所有的微服务注册到一个统一的注册中心，在那里能够查询展示所有可提供服务的微服务实例，这个就是服务的注册。    
具体怎么实现了？其实说白了，手段都只有那些，本质上底层还是通过http，tcp这些通信模式，最终就是访问数据资源，就是ip加端口。  
所以一个最简单的方式就是：服务名称，对应的服务在那个机器的那个端口上提供服务，然后还有个区别就是通信协议，有的是HTTp Restful，有的是RPC，
还有一下其他的SOA的webservice，Thrift等等之类的。  

假设我们现在要调用支付微服务，先拿服务名pay-service，然后去注册中心找，找到了这个微服务部署在192.168.1.10:8080这台机器上，然后
通过请求URL：http://192.168.1.10:8080/pay? 加上POST请求，里面携带支付服务需要的实体对象，这样就完成了调用。  

这个去注册中心找pay-service这个微服务的过程，就是服务发现。  




















